version: 2

models:
  - name: fact_jira_issues_daily_snapshot
    description: "Daily snapshot of key JIRA issue details"
    columns:
      - name: daily_snapshot_primary_key
        description: "Surrogate primary key created from as_of_date and primary key."
        tests:
          - unique
          - not_null

      - name: as_of_date
        description: ""

      - name: primary_key
        description: "Snapshot primary key. Inherited from snapshot model upstream. Will not be unique in this table. 
                      Use daily_snapshot_primary_key instead"

      - name: jira_issue_id
        description: "Natural primary key for JIRA issues. Not unique for this model because it is a snapshot"

      - name: jira_issue_key
        description: Slug of the issue (e.g. MLAI-100)

      - name: issue_type
        description: Type of the issue (e.g. 'Bug', 'Task')

      - name: status
        description: The issue status (e.g. Closed)

      - name: description
        description: Description of the issue.

      - name: assignee
        description: Username of the individual assigned to the issue.

      - name: creator
        description: Who created the ticket

      - name: impact
        description: Estimated impact of the issue.
        tests:
          - accepted_values:
              values: [Trivial, Minor, Major, Critical]
      
      - name: fiscal_quarter
        description: BU Fiscal Quarter for Issue

      - name: effort
        description: Estimated effort of the issue.
        tests:
          - accepted_values:
              values: [Xtra Small, Small, Medium, Large, Xtra Large]

      - name: team
        description: Name of the team that owns the issue.

      - name: investment_category
        description: Category that explains whether we are investing in improving or bringing something new or Keep the lights on or Productivity improvements.

      - name: created_at
        description: When the issue was created

      - name: updated_at
        description: When the issue was last updated

      - name: due_date
        description: When the issue is due.

      - name: resolved_at
        description: When the issue was resolved. Null if it is not resolved.

      - name: sprint_names
        description: ""

      - name: is_real_work
        description: "Classify issue as 'real work' (Story, Task, Sub-task)"

      - name: is_bug
        description: "Classify issue as Bug based on issue type"

      - name: is_team_product
        description: "Classify issues that belong to the product team boards (filter=10000)"

      - name: is_guild
        description: "Classify issues that belong to a guild vs a squad"

      - name: effort_in_days
        description: "Estimated number of days based on the Impact + Effort framework 
                      https://betterup.atlassian.net/wiki/spaces/PT/pages/2031634/Impact+Effort+Framework"

      - name: is_currently_valid
        description: "True if the row represents the current state of a JIRA issue"
