version: 2

models:
  - name: int_coach__coach_profiles_daily_snapshot
    description: >
      Coach Profiles and Profile Island Attributes are the application tables this is derived from.
      Data is at the coach-level (more specifically, coach Profile UUID, but 1:1 relationship with coach ID is tested).
      It is also a daily snapshot, so a historic as_of_date is in the grain.
      Business context: This allows us to see historic coach profile info.
      More docs here: https://betterup.atlassian.net/wiki/spaces/DATA/pages/3345450158/Coach+Snapshot+Data+Model
    tests:
#      - testing that there is only 1 record per coach per date, since PK tests is on Coach Profile ID.
      - unique:
          column_name: "(coach_id || '-' || as_of_date)"
    columns:
      - name: history_primary_key
        description: "Snapshot model primary key is concatenated Coach Profile UUID + as of date"
        tests:
          - unique
          - not_null

      - name: as_of_date
        description: ""

      - name: is_currently_valid
        description: ""

      - name: coach_profile_uuid
        description: ""

      - name: coach_profile_id
        description: ""

      - name: coach_id
        description: ""

      - name: user_uuid
        description: ""

      - name: updated_at
        description: ""

      - name: created_at
        description: ""

      - name: is_primary_coach
        description: ""

      - name: is_consumer
        description: ""

      - name: is_on_demand_coach
        description: ""

      - name: is_qa_coach
        description: ""

      - name: is_care_coach
        description: ""

      - name: is_peer_coach
        description: ""

      - name: is_group_coach
        description: ""

      - name: max_member_count
        description: ""

      - name: hiring_tier
        description: ""

      - name: segment_priority_level
        description: ""

      - name: staffing_languages
        description: ""

      - name: staffing_tier
        description: ""

      - name: coaching_cloud
        description: ""

      - name: coaching_varieties
        description: ""

      - name: staffable_state
        description: ""

      - name: is_eea_eligible
        description: ""
      
      - name: is_fed_eligible
        description: ""

      - name: preferred_weekly_hours
        description: ""
      
      - name: preferred_weekly_hours_updated_at
        description: ""

      - name: valid_from
        description: ""

      - name: valid_to
        description: ""
