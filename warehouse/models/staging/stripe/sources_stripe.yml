version: 2

sources:
  - name: stripe
    schema: "{{ 'airbyte_stripe' if env_var('DEPLOYMENT_ENVIRONMENT', '') == 'US Gov' else 'stitch_stripe' }}"
    database: raw
    tables:
      - name: balance_transactions
        freshness:
          warn_after:
            count: 12
            period: hour
          error_after:
            count: 24
            period: hour
        loaded_at_field: created
      - name: charges
      - name: coupons
      - name: customers
      - name: disputes
      - name: events
        freshness:
          warn_after: {count: 12, period: hour}
          error_after: {count: 24, period: hour}
        
      - name: invoice_items
      - name: invoice_line_items
      - name: invoices
      - name: payout_transactions
      - name: payouts
      - name: plans
      - name: products
      - name: subscription_items
      - name: subscriptions
        freshness:
          warn_after: {count: 12, period: hour}
          error_after: {count: 24, period: hour}
        