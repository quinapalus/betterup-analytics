version: 2

models:
  - name: stg_stripe__subscriptions
    description: Subscriptions allow you to charge a customer on a recurring basis.  See
      more info here - https://stripe.com/docs/api/subscriptions
    columns:
      - name: stripe_subscription_id
        description: Unique identifier for the object. Primary key.
        tests:
          - unique
          - not_null

      - name: billing
        description: Seems to be the same as collection_method.

      - name: billing_cycle_anchor
        description: >
          Determines the date of the first full invoice, and, for plans with month
          or year  intervals, the day of the month for subsequent invoices. The timestamp
          is in  UTC format.

      - name: canceled_at
        description: >
          If the subscription has been canceled, the date of that cancellation. If
          the  subscription was canceled with cancel_at_period_end, canceled_at will
          reflect  the time of the most recent update request, not the end of the
          subscription  period when the subscription is automatically moved to a canceled
          state.

      - name: cancel_at
        description: >
          A date in the future at which the subscription will automatically get canceled

      - name: is_cancel_at_period_end
        description: >
          If the subscription has been canceled with the at_period_end flag set to
          true,  cancel_at_period_end on the subscription will be true. You can use
          this  attribute to determine whether a subscription that has a status of
          active is  scheduled to be canceled at the end of the current period.

      - name: collection_method
        description: >
          Either charge_automatically, or send_invoice. When charging automatically,  Stripe
          will attempt to pay this subscription at the end of the cycle using the  default
          source attached to the customer. When sending an invoice, Stripe will  email
          your customer an invoice with payment instructions.

      - name: created_at
        description: >
          Time at which the object was created. Measured in seconds since the Unix
          epoch.

      - name: current_period_end_at
        description: >
          End of the current period that the subscription has been invoiced  for.
          At the end of this period, a new invoice will be created.

      - name: current_period_start_at
        description: >
          Start of the current period that the subscription has been invoiced for.

      - name: stripe_customer_id
        description: ID of the customer who owns the subscription.

      - name: days_until_due
        description: >
          Number of days a customer has to pay invoices generated by this subscription.  This
          value will be null for subscriptions where  collection_method=charge_automatically.

      - name: default_payment_method
        description: >
          ID of the default payment method for the subscription. It must belong to
          the  customer associated with the subscription. This takes precedence over  default_source.
          If neither are set, invoices will use the customer's  invoice_settings.default_payment_method
          or default_source.

      - name: discount
        description: >
          Describes the current discount applied to this subscription, if there is
          one.  When billing, a discount applied to a subscription overrides a discount
          applied  on a customer-wide basis.

      - name: ended_at
        description: If the subscription has ended, the date the subscription ended.

      - name: invoice_customer_balance_settings
        description: This column stores the customer balance settings used for invoice
          generation. [GenAI Description]

      - name: stripe_subscription_item_id_array
        description: List of subscription items, each with an attached price. Contained
          as an array.

      - name: stripe_latest_invoice_id
        description: The most recent invoice this subscription has generated.

      - name: is_livemode
        description: >
          Has the value true if the object exists in live mode or the value false
          if the  object exists in test mode.

      - name: metadata
        description: >
          Set of key-value pairs that you can attach to an object. This can be useful
          for  storing additional information about the object in a structured format.

      - name: object
        description: >
          String representing the objectâ€™s type. Objects of the same type share the
          same  value.

      - name: plan
        description: >
          Plans define the base price, currency, and billing cycle for recurring purchases  of
          products.

      - name: quantity
        description: The 'quantity' column stores the number of subscription items
          that are associated with each subscription. [GenAI Description]

      - name: start
        description: The 'start' column stores a timestamp indicating when a subscription
          was initiated. [GenAI Description]

      - name: start_date
        description: >
          Date when the subscription was first created. The date might differ  from
          the created date due to backdating.

      - name: status
        description: The status of the subscription
        tests:
          - accepted_values:
              values: [all, ended, incomplete, incomplete_expired, trialing, active,
                past_due, canceled, unpaid]

      - name: trial_end
        description: If the subscription has a trial, the end of that trial.

      - name: trial_start
        description: If the subscription has a trial, the beginning of that trial.

      - name: updated_at
        description: The updated_at column stores the timestamp of the last update
          made to a Stripe subscription record. [GenAI Description]

      - name: pause_collection
        description: >
          If specified, payment collection for this subscription will be paused.

      - name: default_source
        description: >-
          ID of the default payment source for the subscription. It must belong to
          the  customer associated with the subscription and be in a chargeable state.
          If  default_payment_method is also set, default_payment_method will take
          precedence.  If neither are set, invoices will use the customer's  invoice_settings.default_payment_method
          or default_source.
